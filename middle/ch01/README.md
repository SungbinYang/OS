> 이 포스트는 [감자님 강의](https://www.inflearn.com/course/%EB%B9%84%EC%A0%84%EA%B3%B5%EC%9E%90-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/dashboard '인프런 강의')를 기반으로 작성되었습니다.

## 프로그램과 프로세스

프로그램이란, 하드디스크등과 같은 저장장치에 저장된 명령문의 집합체, 애플리케이션이라고 불리며 Windows 운영체제에서는 exe파일의 모습을 띤다. 프로세스는 쉽게 말해 실행 중인 프로그램을 의미한다. 실행 중인 프로그램이란 하드디스크에 저장된 프로그램이 메모리에 올라왔을 때 실행 중인 프로그램, 프로세스라고 불린다. 프로그램은 컴퓨터 관점에서 저장장치만 사용하는 수동적인 존재인 반면에 프로세스는 메모리도 사용하고 CPU 스케줄링 알고리즘에 따라 CPU도 사용하고 필요에 따라 I/O를 하기 때문에 능동적인 존재이다.

### 프로세스 구조

프로세스는 코드 영역, 데이터 영역, 스택 영역, 힙 영역으로 이루어 진다. 코드 영역은 자신을 실행하는 코드가 저장되어 있고, 데이터 영역은 전역변수와 static 변수가 저장되어 있다. 스택 영역은 지역변수와 함수를 호출했을 때 필요정보(함수 호출 시 매개변수와 돌아갈 주소)를 저장한다. 힙 영역은 개발자가 동적으로 메모리를 할당하는 데 쓰인다. 즉, 개발자가 런타임시 할당할 수 있는 메모리 공간을 의미한다. C언어에서 malloc(힙 영역에 메모리 공간 할당), free(할당된 메모리 공간 해제) 함수로 힙 영역의 자원을 할당 혹은 해제할 수 있다.

### 코드가 메모리에 올라가 프로세스가 되는 과정

```c
#include <stdio.h>

void main() {
  int a = 5;
  int b = 7;
  int result = a + b;
}
```

이제 위의 코드의 프로그램이 어떻게 프로세스가 되는지 알아보자. 위의 코드는 C언어로 작성되어있다. C언어는 컴파일 언어이기 때문에 컴파일이 되어야 실행 가능함으로 컴파일을 해줘야 한다. 컴파일 과정은 먼저 전처리기를 거쳐서 메크로로 정의된 숫자를 치환시켜 주고 필요한 파일들을 불러온다. 전처리기를 거치면 파일의 확장자는. i가 된다. 그다음 컴파일러가 컴파일을 해준다. 컴파일을 마치면 C언어는 저수준의 어셈블리어로 변경된다. 어셈블리어는 명령어가 기계어랑 1:1 매칭이 되기 때문에 기계어랑 가장 가까운 언어이다. 이때 파일의 확장자는. s다. 이제 어셈블러가 어셈블리어를 기계어로 바꿔준다. 그럼 파일은 0과 1로 이루어진 기계어로 구성되고 파일의 확장자는. o가 된다. 마지막으로 링커가 링킹을 해준다. 여러 가지 라이브러리나 다른 소스코드들을 연결해 준다. 그러면 파일은 이제 exe파일이 되고 이 파일을 더블 클릭했을 때 메모리에 올라가고 이 프로그램은 프로세스가 된다. 이 프로세스는 운영체제에 의해 관리되며 운영체제의 전략에 따라 프로세스가 실행되는데 이를 CPU관점으로 봐보자. 위의 코드의 예시를 들어서 설명해 보겠다.

CPU는 0과 1과 같은 기계어를 실행하는데 CPU내에 제어장치가 숫자 5, 7을 저장한다. 이 메모리에 저장된 값을 각 레지스터로 가져온다. 레지스터의 값을 ALU가 실행 후 결과 값을 기존 레지스터의 한 곳에 저장을 한다. 이제 제어장치가 이 값을 메모리로 전달한다.
