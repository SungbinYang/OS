> 이 포스트는 [감자님 강의](https://www.inflearn.com/course/%EB%B9%84%EC%A0%84%EA%B3%B5%EC%9E%90-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/dashboard '인프런 강의')를 기반으로 작성되었습니다.

## 교착상태(데드락)

여러 프로세스가 서로 다른 프로세스의 작업이 끝나기를 기다리다가 아무도 작업을 진행하지 못하는 상태를 교착상태라고 한다. 교착상태는 일상생활에서도 발생할 수 있다. 복잡한 도시의 퇴근길을 생각해 보자. 어떤 차량이 꼬리물기를 해서 도로가 마비되었다고 하자. 앞에서 길을 터줘야 갈 수 있는데 지금은 이러지도 저러지도 못하는 상황이다. 이럴 때 누군가 도로를 통제해서 해결해줘야 한다. 교착상태가 발생하는 이유는 공유자원 때문이다. 만약 어떤 자원을 여러 개의 프로세스가 공유하지 않는다면 교착상태는 발생하지 않는다. 조금 전 예사에서 공유자원을 찾아보자. 예시에서 공유자원은 도로이다. 공유되는 도로를 서로 차지하려다가 교착상태가 발생한 것이다.

이제 교착상태를 설명하는 유명한 예시를 한번 살펴보자. 바로 '식사하는 철학자'이다. 원형으로 된 탁자에서 맛있는 음식이 준비되어 있고 의자가 3개 놓여져 있다. 철학자 3명은 각자 의자에 앉아서 음식을 먹으려고 하는데 포크는 3개밖에 없다. 음식을 먹으려면 포크 2개를 사용해야 한다. 음식을 먹으려는 철학자는 좌우에 있는 포크를 집어서 음식을 먹어야 한다. 그동안 다른 철학자는 음식을 먹지 않고 대기를 하면서 책을 읽는다. 이렇게만 식사가 이루어지면 아무런 문제가 발생하지 않는다. 하지만 문제가 발생한다. 우연히 철학자 3명이 동시에 자기 오른쪽에 있는 포크를 동시에 집었다. 모든 철학자에게 포크가 1개 더 필요한 상황이다. 그런데 아무도 양보하지 않아서 더 이상 식사가 불가능한 교착상태에 빠진다.

그러면 교착상태 필요조건은 무엇일까? 4가지가 존재하는데 이 중 1개라도 충족하지 않는다면 교착상태는 발생하지 않는다. 그럼 4가지 조건을 살펴보자. 첫째, 상호배제이다. 어떤 프로세스가 한 리소스를 점유했다면 그 리소스는 다른 프로세스에게 공유를 할 수 없다. 식사하는 철학자에서 포크가 이에 해당한다. 먼저 포크를 집헝ㅆ다면 그 포크는 다른 철학자에게 공유할 수 없는 리소스이다. 둘째, 비선점이다. 프로세스 A가 리소스를 점유하고 있는데 프로세스 B가 리소스를 뺏을 수 없어야 한다. 식사하는 철학자에서 철학자 A가 들고 있는 포크를 철학자 B가 뺏을 수 없는 상황이다. 셋째, 점유와 대기이다. 어떤 프로세스가 리소스 A를 가지고 있는 상태에서 리소스 B를 원하는 상황이어야 한다. 식사하는 철학자에서 오른쪽 포크를 손에 쥔 채로 왼쪽 포크를 기다리고 있는 상태여야 한다. 넷째, 원형대기이다. 원형대기는 점유와 대기를 하는 프로세스들의 관계가 원형을 이루고 있다는 것이다. 식사하는 철학자에서 서로가 서로의 포크를 원하는 상황이 원형을 이루고 있다.

지금까지 알아 본 교착상태의 필요조건에서 한 가지라도 충족하지 않는다면 교착상태는 발생하지 않는다. 운영체제를 연구하는 사람들은 이것을 이용하여 교착상태를 예방하려고 했으나 제약이 많고 굉장히 비효율적이라 다른 방식을 연구했다. 바로 교착상태에 빠졌을 때 해결하는 방식으로 연구하였다.
